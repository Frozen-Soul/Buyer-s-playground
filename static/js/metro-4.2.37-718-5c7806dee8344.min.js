!function(factory){"function"==typeof define&&define.amd?define(["jquery"],factory):factory(jQuery)}(function(jQuery){"use strict";var $=jQuery;$=jQuery;if(void 0===jQuery)throw new Error("Metro 4 requires jQuery!");if("MutationObserver"in window==!1)throw new Error("Metro 4 requires MutationObserver!");var meta_init=$("meta[name='metro4:init']").attr("content"),meta_locale=$("meta[name='metro4:locale']").attr("content"),meta_week_start=$("meta[name='metro4:week_start']").attr("content"),meta_date_format=$("meta[name='metro4:date_format']").attr("content"),meta_date_format_input=$("meta[name='metro4:date_format_input']").attr("content"),meta_animation_duration=$("meta[name='metro4:animation_duration']").attr("content"),meta_callback_timeout=$("meta[name='metro4:callback_timeout']").attr("content"),meta_timeout=$("meta[name='metro4:timeout']").attr("content"),meta_scroll_multiple=$("meta[name='metro4:scroll_multiple']").attr("content"),meta_cloak=$("meta[name='metro4:cloak']").attr("content"),meta_cloak_duration=$("meta[name='metro4:cloak_duration']").attr("content");void 0===window.METRO_INIT&&(window.METRO_INIT=void 0===meta_init||JSON.parse(meta_init)),void 0===window.METRO_DEBUG&&(window.METRO_DEBUG=!0),void 0===window.METRO_WEEK_START&&(window.METRO_WEEK_START=void 0!==meta_week_start?parseInt(meta_week_start):0),void 0===window.METRO_DATE_FORMAT&&(window.METRO_DATE_FORMAT=void 0!==meta_date_format?meta_date_format:"%Y-%m-%d"),void 0===window.METRO_DATE_FORMAT_INPUT&&(window.METRO_DATE_FORMAT_INPUT=void 0!==meta_date_format_input?meta_date_format_input:"%Y-%m-%d"),void 0===window.METRO_LOCALE&&(window.METRO_LOCALE=void 0!==meta_locale?meta_locale:"en-US"),void 0===window.METRO_ANIMATION_DURATION&&(window.METRO_ANIMATION_DURATION=void 0!==meta_animation_duration?parseInt(meta_animation_duration):300),void 0===window.METRO_CALLBACK_TIMEOUT&&(window.METRO_CALLBACK_TIMEOUT=void 0!==meta_callback_timeout?parseInt(meta_callback_timeout):500),void 0===window.METRO_TIMEOUT&&(window.METRO_TIMEOUT=void 0!==meta_timeout?parseInt(meta_timeout):2e3),void 0===window.METRO_SCROLL_MULTIPLE&&(window.METRO_SCROLL_MULTIPLE=void 0!==meta_scroll_multiple?parseInt(meta_scroll_multiple):20),void 0===window.METRO_CLOAK_REMOVE&&(window.METRO_CLOAK_REMOVE=void 0!==meta_cloak?(""+meta_cloak).toLowerCase():"fade"),void 0===window.METRO_CLOAK_DURATION&&(window.METRO_CLOAK_DURATION=void 0!==meta_cloak_duration?parseInt(meta_cloak_duration):500),void 0===window.METRO_HOTKEYS_FILTER_CONTENT_EDITABLE&&(window.METRO_HOTKEYS_FILTER_CONTENT_EDITABLE=!0),void 0===window.METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS&&(window.METRO_HOTKEYS_FILTER_INPUT_ACCEPTING_ELEMENTS=!0),void 0===window.METRO_HOTKEYS_FILTER_TEXT_INPUTS&&(window.METRO_HOTKEYS_FILTER_TEXT_INPUTS=!0),void 0===window.METRO_HOTKEYS_BUBBLE_UP&&(window.METRO_HOTKEYS_BUBBLE_UP=!1),void 0===window.METRO_THROWS&&(window.METRO_THROWS=!0),window.METRO_MEDIA=[],"function"!=typeof Object.create&&(Object.create=function(o){function F(){}return F.prototype=o,new F}),"function"!=typeof Object.values&&(Object.values=function(obj){return Object.keys(obj).map(function(e){return obj[e]})});var isTouch="ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints,Metro={version:"4.2.37",versionFull:"4.2.37.718 ",isTouchable:isTouch,fullScreenEnabled:document.fullscreenEnabled,sheet:null,controlsPosition:{INSIDE:"inside",OUTSIDE:"outside"},groupMode:{ONE:"one",MULTI:"multi"},aspectRatio:{HD:"hd",SD:"sd",CINEMA:"cinema"},fullScreenMode:{WINDOW:"window",DESKTOP:"desktop"},position:{TOP:"top",BOTTOM:"bottom",LEFT:"left",RIGHT:"right",TOP_RIGHT:"top-right",TOP_LEFT:"top-left",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",LEFT_BOTTOM:"left-bottom",LEFT_TOP:"left-top",RIGHT_TOP:"right-top",RIGHT_BOTTOM:"right-bottom"},popoverEvents:{CLICK:"click",HOVER:"hover",FOCUS:"focus"},stepperView:{SQUARE:"square",CYCLE:"cycle",DIAMOND:"diamond"},listView:{LIST:"list",CONTENT:"content",ICONS:"icons",ICONS_MEDIUM:"icons-medium",ICONS_LARGE:"icons-large",TILES:"tiles",TABLE:"table"},events:{click:"click.metro",start:isTouch?"touchstart.metro":"mousedown.metro",stop:isTouch?"touchend.metro":"mouseup.metro",move:isTouch?"touchmove.metro":"mousemove.metro",enter:isTouch?"touchstart.metro":"mouseenter.metro",leave:"mouseleave.metro",focus:"focus.metro",blur:"blur.metro",resize:"resize.metro",keyup:"keyup.metro",keydown:"keydown.metro",keypress:"keypress.metro",dblclick:"dblclick.metro",input:"input.metro",change:"change.metro",cut:"cut.metro",paste:"paste.metro",scroll:"scroll.metro",scrollStart:"scrollstart.metro",scrollStop:"scrollstop.metro",mousewheel:"mousewheel.metro",inputchange:"change.metro input.metro propertychange.metro cut.metro paste.metro copy.metro",dragstart:"dragstart.metro",dragend:"dragend.metro",dragenter:"dragenter.metro",dragover:"dragover.metro",dragleave:"dragleave.metro",drop:"drop.metro",drag:"drag.metro"},keyCode:{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,BREAK:19,CAPS:20,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,COMMA:188},media_queries:{FS:"(min-width: 0px)",XS:"(min-width: 360px)",SM:"(min-width: 576px)",MD:"(min-width: 768px)",LG:"(min-width: 992px)",XL:"(min-width: 1200px)",XXL:"(min-width: 1452px)"},media_sizes:{FS:0,XS:360,SM:576,LD:640,MD:768,LG:992,XL:1200,XXL:1452},media_mode:{FS:"fs",XS:"xs",SM:"sm",MD:"md",LG:"lg",XL:"xl",XXL:"xxl"},media_modes:["fs","xs","sm","md","lg","xl","xxl"],actions:{REMOVE:1,HIDE:2},hotkeys:[],about:function(f){console.log("Metro 4 - v"+(!0===f?this.versionFull:this.version))},aboutDlg:function(f){alert("Metro 4 - v"+(!0===f?this.versionFull:this.version))},ver:function(f){return!0===f?this.versionFull:this.version},observe:function(){new MutationObserver(function(mutations){mutations.map(function(mutation){if("attributes"===mutation.type&&"data-role"!==mutation.attributeName){var element=$(mutation.target),mc=element.data("metroComponent");void 0!==mc&&$.each(mc,function(){var plug=element.data(this);plug&&plug.changeAttribute(mutation.attributeName)})}else if("childList"===mutation.type&&0<mutation.addedNodes.length){var i,obj,widgets={},plugins={},nodes=mutation.addedNodes;for(i=0;i<nodes.length;i++){var node=mutation.addedNodes[i];"SCRIPT"!==node.tagName&&"STYLE"!==node.tagName&&(plugins=(obj=$(mutation.addedNodes[i])).find("[data-role]"),(widgets=void 0!==obj.data("role")?$.merge(plugins,obj):plugins).length&&Metro.initWidgets(widgets))}}})}).observe($("html")[0],{childList:!0,attributes:!0,subtree:!0})},init:function(){var widgets=$("[data-role]"),hotkeys=$("[data-hotkey]"),html=$("html");return!0===isTouch?html.addClass("metro-touch-device"):html.addClass("metro-no-touch-device"),this.sheet=Utils.newCssSheet(),window.METRO_MEDIA=[],$.each(Metro.media_queries,function(key,query){Utils.media(query)&&METRO_MEDIA.push(Metro.media_mode[key])}),this.observe(),this.initHotkeys(hotkeys),this.initWidgets(widgets),this.about(!0),"fade"!==METRO_CLOAK_REMOVE?$(".m4-cloak").removeClass("m4-cloak"):$(".m4-cloak").animate({opacity:1},METRO_CLOAK_REMOVE,function(){$(".m4-cloak").removeClass("m4-cloak")}),this},initHotkeys:function(hotkeys){$.each(hotkeys,function(){var element=$(this),hotkey=!!element.data("hotkey")&&element.data("hotkey").toLowerCase();!1!==hotkey&&!0!==element.data("hotKeyBonded")&&(Metro.hotkeys.push(hotkey),$(document).on(Metro.events.keyup,null,hotkey,function(e){if(void 0!==element)return"A"===element[0].tagName&&void 0!==element.attr("href")&&""!==element.attr("href").trim()&&"#"!==element.attr("href").trim()?document.location.href=element.attr("href"):element.click(),METRO_HOTKEYS_BUBBLE_UP}),element.data("hotKeyBonded",!0))})},initWidgets:function(widgets){$.each(widgets,function(){var $this=$(this);$this.data("role").split(/\s*,\s*/).map(function(func){if(void 0!==$.fn[func]&&void 0===$this.attr("data-role-"+func)){$.fn[func].call($this),$this.attr("data-role-"+func,!0);var mc=$this.data("metroComponent");void 0===mc?mc=[func]:mc.push(func),$this.data("metroComponent",mc)}})})},plugin:function(name,object){$.fn[name]=function(options){return this.each(function(){$.data(this,name,Object.create(object).init(options,this))})}},destroyPlugin:function(element,name){var p,mc;if(element=Utils.isJQueryObject(element)?element[0]:element,p=$(element).data(name),!Utils.isValue(p))throw new Error("Component can not be destroyed: the element is not a Metro 4 component.");if(!Utils.isFunc(p.destroy))throw new Error("Component can not be destroyed: method destroy not found.");p.destroy(),mc=$(element).data("metroComponent"),Utils.arrayDelete(mc,name),$(element).data("metroComponent",mc),$.removeData(element,name),$(element).removeAttr("data-role-"+name)},destroyPluginAll:function(element){element=Utils.isJQueryObject(element)?element[0]:element;var mc=$(element).data("metroComponent");void 0!==mc&&0<mc.length&&$.each(mc,function(){Metro.destroyPlugin(element,this)})},initPlugin:function(element,name){element=$(element);try{if(void 0!==$.fn[name]&&void 0===element.attr("data-role-"+name)){$.fn[name].call(element),element.attr("data-role-"+name,!0);var mc=element.data("metroComponent");void 0===mc?mc=[name]:mc.push(name),element.data("metroComponent",mc)}}catch(e){console.log(e.message,e.stack)}},reinitPlugin:function(element,name){this.destroyPlugin(element,name),this.initPlugin(element,name)},reinitPluginAll:function(element){var mc=$(element).data("metroComponent");void 0!==mc&&0<mc.length&&$.each(mc,function(){Metro.reinitPlugin(element,this)})},noop:function(){},noop_true:function(){return!0},noop_false:function(){return!1},stop:function(e){e.stopPropagation(),e.preventDefault()},requestFullScreen:function(element){element.mozRequestFullScreen?element.mozRequestFullScreen():element.webkitRequestFullScreen?element.webkitRequestFullScreen():element.msRequestFullscreen?element.msRequestFullscreen():element.requestFullscreen()},exitFullScreen:function(){document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen?document.msExitFullscreen():document.exitFullscreen()},inFullScreen:function(){return void 0!==(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}};window.Metro=Metro,$(window).on(Metro.events.resize,function(){window.METRO_MEDIA=[],$.each(Metro.media_queries,function(key,query){Utils.media(query)&&METRO_MEDIA.push(Metro.media_mode[key])})}),$.fn.extend({toggleAttr:function(a,v){return this.each(function(){var el=$(this);void 0!==v?el.attr(a,v):void 0!==el.attr(a)?el.removeAttr(a):el.attr(a,""+a)})},clearClasses:function(){return this.each(function(){this.className=""})}}),Array.prototype.shuffle=function(){for(var temporaryValue,randomIndex,currentIndex=this.length;0!==currentIndex;)randomIndex=Math.floor(Math.random()*currentIndex),temporaryValue=this[currentIndex-=1],this[currentIndex]=this[randomIndex],this[randomIndex]=temporaryValue;return this},Array.prototype.clone=function(){return this.slice(0)},Array.prototype.unique=function(){for(var a=this.concat(),i=0;i<a.length;++i)for(var j=i+1;j<a.length;++j)a[i]===a[j]&&a.splice(j--,1);return a},Array.from||(Array.from=function(val){var i,a=[];if(void 0===val.length&&"object"==typeof val)return Object.values(val);if(void 0===val.length)throw new Error("Value can not be converted to array");for(i=0;i<val.length;i++)a.push(val[i]);return a}),"function"!=typeof Array.contains&&(Array.prototype.contains=function(val,from){return-1<this.indexOf(val,from)}),Number.prototype.format=function(n,x,s,c){var re="\\d(?=(\\d{"+(x||3)+"})+"+(0<n?"\\D":"$")+")",num=this.toFixed(Math.max(0,~~n));return(c?num.replace(".",c):num).replace(new RegExp(re,"g"),"$&"+(s||","))},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.contains=function(){return!!~String.prototype.indexOf.apply(this,arguments)},String.prototype.toDate=function(format,locale){var normalized,formatItems,dateItems,monthIndex,dayIndex,yearIndex,hourIndex,minutesIndex,secondsIndex,year,month,day,hour,minute,second,parsedMonth;locale=locale||"en-US";if(null==format||""===format)return new Date(this);if(normalized=this.replace(/[\/,.:\s]/g,"-"),formatItems=format.toLowerCase().replace(/[^a-zA-Z0-9%]/g,"-").split("-"),dateItems=normalized.split("-"),""===normalized.replace(/\-/g,"").trim())return"Invalid Date";if(monthIndex=-1<formatItems.indexOf("mm")?formatItems.indexOf("mm"):formatItems.indexOf("%m"),dayIndex=-1<formatItems.indexOf("dd")?formatItems.indexOf("dd"):formatItems.indexOf("%d"),yearIndex=-1<formatItems.indexOf("yyyy")?formatItems.indexOf("yyyy"):-1<formatItems.indexOf("yy")?formatItems.indexOf("yy"):formatItems.indexOf("%y"),hourIndex=-1<formatItems.indexOf("hh")?formatItems.indexOf("hh"):formatItems.indexOf("%h"),minutesIndex=-1<formatItems.indexOf("ii")?formatItems.indexOf("ii"):-1<formatItems.indexOf("mi")?formatItems.indexOf("mi"):formatItems.indexOf("%i"),secondsIndex=-1<formatItems.indexOf("ss")?formatItems.indexOf("ss"):formatItems.indexOf("%s"),!(-1<monthIndex&&""!==dateItems[monthIndex]))return"Invalid Date";if(isNaN(parseInt(dateItems[monthIndex]))){if(dateItems[monthIndex]=function(month){var d,months,index,i;if(month=month.substr(0,3),void 0!==locale&&"en-US"!==locale&&void 0!==Locales&&void 0!==Locales[locale]&&void 0!==Locales[locale].calendar&&void 0!==Locales[locale].calendar.months){for(months=Locales[locale].calendar.months,i=12;i<months.length;i++)if(months[i].toLowerCase()===month.toLowerCase()){index=i-12;break}month=Locales["en-US"].calendar.months[index]}return d=Date.parse(month+" 1, 1972"),isNaN(d)?-1:new Date(d).getMonth()+1}(dateItems[monthIndex]),-1===dateItems[monthIndex])return"Invalid Date"}else if((parsedMonth=parseInt(dateItems[monthIndex]))<1||12<parsedMonth)return"Invalid Date";return year=-1<yearIndex&&""!==dateItems[yearIndex]?dateItems[yearIndex]:null,month=-1<monthIndex&&""!==dateItems[monthIndex]?dateItems[monthIndex]:null,day=-1<dayIndex&&""!==dateItems[dayIndex]?dateItems[dayIndex]:null,hour=-1<hourIndex&&""!==dateItems[hourIndex]?dateItems[hourIndex]:null,minute=-1<minutesIndex&&""!==dateItems[minutesIndex]?dateItems[minutesIndex]:null,second=-1<secondsIndex&&""!==dateItems[secondsIndex]?dateItems[secondsIndex]:null,new Date(year,month-1,day,hour,minute,second)},String.prototype.toArray=function(delimiter,type,format){return type=type||"string",format=null!=format&&format,(""+this).split(delimiter=delimiter||",").map(function(s){var result;switch(type){case"int":case"integer":result=parseInt(s);break;case"number":case"float":result=parseFloat(s);break;case"date":result=format?s.toDate(format):new Date(s);break;default:result=s.trim()}return result})},Date.prototype.getWeek=function(dowOffset){var nday,newYear,day,daynum,weeknum;return dowOffset=Utils.isValue(dowOffset)?"number"==typeof dowOffset?parseInt(dowOffset):0:METRO_WEEK_START,day=0<=(day=(newYear=new Date(this.getFullYear(),0,1)).getDay()-dowOffset)?day:day+7,daynum=Math.floor((this.getTime()-newYear.getTime()-6e4*(this.getTimezoneOffset()-newYear.getTimezoneOffset()))/864e5)+1,day<4?52<(weeknum=Math.floor((daynum+day-1)/7)+1)&&(weeknum=(nday=0<=(nday=new Date(this.getFullYear()+1,0,1).getDay()-dowOffset)?nday:nday+7)<4?1:53):weeknum=Math.floor((daynum+day-1)/7),weeknum},Date.prototype.getYear=function(){return this.getFullYear().toString().substr(-2)},Date.prototype.format=function(format,locale){void 0===locale&&(locale="en-US");var cal=(void 0!==Metro.locales&&void 0!==Metro.locales[locale]?Metro.locales[locale]:Metro.locales["en-US"]).calendar,date=this,nDay=date.getDay(),nDate=date.getDate(),nMonth=date.getMonth(),nYear=date.getFullYear(),nHour=date.getHours(),aDays=cal.days,aMonths=cal.months,aDayCount=[0,31,59,90,120,151,181,212,243,273,304,334],getThursday=function(){var target=new Date(date);return target.setDate(nDate-(nDay+6)%7+3),target},zeroPad=function(nNum,nPad){return(""+(Math.pow(10,nPad)+nNum)).slice(1)};return format.replace(/(%[a-z])/gi,function(sMatch){return{"%a":aDays[nDay].slice(0,3),"%A":aDays[nDay],"%b":aMonths[nMonth].slice(0,3),"%B":aMonths[nMonth],"%c":date.toUTCString(),"%C":Math.floor(nYear/100),"%d":zeroPad(nDate,2),dd:zeroPad(nDate,2),"%e":nDate,"%F":date.toISOString().slice(0,10),"%G":getThursday().getFullYear(),"%g":(""+getThursday().getFullYear()).slice(2),"%H":zeroPad(nHour,2),"%I":zeroPad((nHour+11)%12+1,2),"%j":zeroPad(aDayCount[nMonth]+nDate+(1<nMonth&&(nYear%4==0&&nYear%100!=0||nYear%400==0)?1:0),3),"%k":""+nHour,"%l":(nHour+11)%12+1,"%m":zeroPad(nMonth+1,2),"%M":zeroPad(date.getMinutes(),2),"%p":nHour<12?"AM":"PM","%P":nHour<12?"am":"pm","%s":Math.round(date.getTime()/1e3),"%S":zeroPad(date.getSeconds(),2),"%u":nDay||7,"%V":function(){var target=getThursday(),n1stThu=target.valueOf();target.setMonth(0,1);var nJan1=target.getDay();return 4!==nJan1&&target.setMonth(0,1+(4-nJan1+7)%7),zeroPad(1+Math.ceil((n1stThu-target)/6048e5),2)}(),"%w":""+nDay,"%x":date.toLocaleDateString(),"%X":date.toLocaleTimeString(),"%y":(""+nYear).slice(2),"%Y":nYear,"%z":date.toTimeString().replace(/.+GMT([+-]\d+).+/,"$1"),"%Z":date.toTimeString().replace(/.+\((.+?)\)$/,"$1")}[sMatch]||sMatch})},Date.prototype.addHours=function(n){return this.setTime(this.getTime()+60*n*60*1e3),this},Date.prototype.addDays=function(n){return this.setDate(this.getDate()+n),this},Date.prototype.addMonths=function(n){return this.setMonth(this.getMonth()+n),this},Date.prototype.addYears=function(n){return this.setFullYear(this.getFullYear()+n),this};var Utils={isUrl:function(val){return/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@\-\/]))?/.test(val)},isTag:function(val){return/^<\/?[\w\s="/.':;#-\/\?]+>/gi.test(val)},isColor:function(val){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(val)},isEmbedObject:function(val){var result=!1;return $.each(["iframe","object","embed","video"],function(i,v){"string"==typeof val&&val.toLowerCase()===v?result=!0:void 0!==val.nodeType&&val.tagName.toLowerCase()===v&&(result=!0)}),result},isVideoUrl:function(val){return/youtu\.be|youtube|vimeo/gi.test(val)},isDate:function(val,format){return!("object"!=typeof val||!Utils.isFunc(val.getMonth))||"Invalid Date"!==(Utils.isValue(format)?String(val).toDate(format):String(new Date(val)))},isDateObject:function(v){return"object"==typeof v&&void 0!==v.getMonth},isInt:function(n){return Number(n)===n&&n%1==0},isFloat:function(n){return Number(n)===n&&n%1!=0},isTouchDevice:function(){return"ontouchstart"in window||0<navigator.MaxTouchPoints||0<navigator.msMaxTouchPoints},isFunc:function(f){return Utils.isType(f,"function")},isObject:function(o){return Utils.isType(o,"object")},isArray:function(a){return Array.isArray(a)},isType:function(o,t){if(null==o)return!1;if(typeof o===t)return o;if(Utils.isTag(o)||Utils.isUrl(o))return!1;if(typeof window[o]===t)return window[o];if("string"==typeof o&&-1===o.indexOf("."))return!1;if("string"==typeof o&&-1!==o.indexOf(" "))return!1;if("string"==typeof o&&-1!==o.indexOf("("))return!1;if("string"==typeof o&&-1!==o.indexOf("["))return!1;if("number"==typeof o&&"number"!==t.toLowerCase())return!1;var i,ns=o.split("."),context=window;for(i=0;i<ns.length;i++)context=context[ns[i]];return typeof context===t&&context},isMetroObject:function(el,type){var $el=$(el),el_obj=$el.data(type);return 0===$el.length?(console.log(type+" "+el+" not found!"),!1):void 0!==el_obj||(console.log("Element not contain role "+type+'! Please add attribute data-role="'+type+'" to element '+el),!1)},isJQueryObject:function(el){return"function"==typeof jQuery&&el instanceof jQuery},embedObject:function(val){return"string"!=typeof val&&(val=Utils.isJQueryObject(val)?val.html():val.innerHTML),"<div class='embed-container'>"+val+"</div>"},embedUrl:function(val){return-1!==val.indexOf("youtu.be")&&(val="https://www.youtube.com/embed/"+val.split("/").pop()),"<div class='embed-container'><iframe src='"+val+"'></iframe></div>"},secondsToTime:function(secs){var divisor_for_minutes=secs%3600,divisor_for_seconds=divisor_for_minutes%60;return{h:Math.floor(secs/3600),m:Math.floor(divisor_for_minutes/60),s:Math.ceil(divisor_for_seconds)}},hex2rgba:function(hex,alpha){var c;if(alpha=isNaN(alpha)?1:alpha,/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex))return 3===(c=hex.substring(1).split("")).length&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]),"rgba("+[(c="0x"+c.join(""))>>16&255,c>>8&255,255&c].join(",")+","+alpha+")";throw new Error("Hex2rgba error. Bad Hex value")},random:function(from,to){return Math.floor(Math.random()*(to-from+1)+from)},uniqueId:function(){var d=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=(d+16*Math.random())%16|0;return d=Math.floor(d/16),("x"===c?r:3&r|8).toString(16)})},elementId:function(prefix){return prefix+"-"+(new Date).getTime()+Utils.random(1,1e3)},secondsToFormattedString:function(time){var sec_num=parseInt(time,10),hours=Math.floor(sec_num/3600),minutes=Math.floor((sec_num-3600*hours)/60),seconds=sec_num-3600*hours-60*minutes;return hours<10&&(hours="0"+hours),minutes<10&&(minutes="0"+minutes),seconds<10&&(seconds="0"+seconds),[hours,minutes,seconds].join(":")},callback:function(f,args,context){return Utils.exec(f,args,context)},func:function(f){return new Function("a",f)},exec:function(f,args,context){var result;if(null==f)return!1;var func=Utils.isFunc(f);!1===func&&(func=Utils.func(f));try{result=func.apply(context,args)}catch(err){if(!(result=null)===METRO_THROWS)throw err}return result},isOutsider:function(el){var rect,clone=(el=Utils.isJQueryObject(el)?el:$(el)).clone();return clone.removeAttr("data-role").css({visibility:"hidden",position:"absolute",display:"block"}),el.parent().append(clone),rect=clone[0].getBoundingClientRect(),clone.remove(),0<=rect.top&&0<=rect.left&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)},inViewport:function(el){var rect=Utils.rect(el);return 0<=rect.top&&0<=rect.left&&rect.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&rect.right<=(window.innerWidth||document.documentElement.clientWidth)},rect:function(el){return"function"==typeof jQuery&&el instanceof jQuery&&(el=el[0]),el.getBoundingClientRect()},getCursorPosition:function(el,e){var a=Utils.rect(el);return{x:Utils.pageXY(e).x-a.left-window.pageXOffset,y:Utils.pageXY(e).y-a.top-window.pageYOffset}},getCursorPositionX:function(el,e){return Utils.getCursorPosition(el,e).x},getCursorPositionY:function(el,e){return Utils.getCursorPosition(el,e).y},objectLength:function(obj){return Object.keys(obj).length},percent:function(total,part,round_value){if(0===total)return 0;var result=100*part/total;return!0===round_value?Math.round(result):Math.round(100*result)/100},camelCase:function(str){return str.replace(/-([a-z])/g,function(g){return g[1].toUpperCase()})},dashedName:function(str){return str.replace(/([A-Z])/g,function(u){return"-"+u.toLowerCase()})},objectShift:function(obj){var min=0;return $.each(obj,function(i){0===min?min=i:i<min&&(min=i)}),delete obj[min],obj},objectDelete:function(obj,key){void 0!==obj[key]&&delete obj[key]},arrayDeleteByMultipleKeys:function(arr,keys){return keys.forEach(function(ind){delete arr[ind]}),arr.filter(function(item){return void 0!==item})},arrayDelete:function(arr,val){arr.splice(arr.indexOf(val),1)},arrayDeleteByKey:function(arr,key){arr.splice(key,1)},nvl:function(data,other){return null==data?other:data},objectClone:function(obj){var copy={};for(var key in obj)obj.hasOwnProperty(key)&&(copy[key]=obj[key]);return copy},github:function(repo,callback){var that=this;$.ajax({url:"https://api.github.com/repos/"+repo,dataType:"jsonp"}).done(function(data){that.callback(callback,[data.data])})},detectIE:function(){var ua=window.navigator.userAgent,msie=ua.indexOf("MSIE ");if(0<msie)return parseInt(ua.substring(msie+5,ua.indexOf(".",msie)),10);if(0<ua.indexOf("Trident/")){var rv=ua.indexOf("rv:");return parseInt(ua.substring(rv+3,ua.indexOf(".",rv)),10)}var edge=ua.indexOf("Edge/");return 0<edge&&parseInt(ua.substring(edge+5,ua.indexOf(".",edge)),10)},detectChrome:function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},md5:function(s){return hex_md5(s)},encodeURI:function(str){return encodeURI(str).replace(/%5B/g,"[").replace(/%5D/g,"]")},pageHeight:function(){var body=document.body,html=document.documentElement;return Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight)},cleanPreCode:function(selector){Array.prototype.slice.call(document.querySelectorAll(selector),0).forEach(function(el){var txt=el.textContent.replace(/^[\r\n]+/,"").replace(/\s+$/g,"");if(/^\S/gm.test(txt))el.textContent=txt;else{for(var mat,str,len,re=/^[\t ]+/gm,min=1e3;mat=re.exec(txt);)(len=mat[0].length)<min&&(min=len,str=mat[0]);1e3!==min&&(el.textContent=txt.replace(new RegExp("^"+str,"gm"),""))}})},coords:function(el){Utils.isJQueryObject(el)&&(el=el[0]);var box=el.getBoundingClientRect();return{top:box.top+window.pageYOffset,left:box.left+window.pageXOffset}},positionXY:function(e,t){switch(t){case"client":return Utils.clientXY(e);case"screen":return Utils.screenXY(e);case"page":return Utils.pageXY(e);default:return{x:0,y:0}}},clientXY:function(e){return{x:e.changedTouches?e.changedTouches[0].clientX:e.clientX,y:e.changedTouches?e.changedTouches[0].clientY:e.clientY}},screenXY:function(e){return{x:e.changedTouches?e.changedTouches[0].screenX:e.screenX,y:e.changedTouches?e.changedTouches[0].screenY:e.screenY}},pageXY:function(e){return{x:e.changedTouches?e.changedTouches[0].pageX:e.pageX,y:e.changedTouches?e.changedTouches[0].pageY:e.pageY}},isRightMouse:function(e){return"which"in e?3===e.which:"button"in e?2===e.button:void 0},hiddenElementSize:function(el,includeMargin){var clone=$(el).clone();clone.removeAttr("data-role").css({visibility:"hidden",position:"absolute",display:"block"}),$("body").append(clone),void 0===includeMargin&&(includeMargin=!1);var width=clone.outerWidth(includeMargin),height=clone.outerHeight(includeMargin);return clone.remove(),{width:width,height:height}},getStyle:function(el,pseudo){return!0===Utils.isJQueryObject(el)&&(el=el[0]),window.getComputedStyle(el,pseudo)},getStyleOne:function(el,property){return Utils.getStyle(el).getPropertyValue(property)},getTransformMatrix:function(el,returnArray){var a=Utils.getStyleOne(el,"transform").replace("matrix(","").slice(0,-1).split(",");return!0!==returnArray?{a:a[0],b:a[1],c:a[2],d:a[3],tx:a[4],ty:a[5]}:a},computedRgbToHex:function(rgb){var i,a=rgb.replace(/[^\d,]/g,"").split(","),result="#";for(i=0;i<3;i++){var h=parseInt(a[i]).toString(16);result+=1===h.length?"0"+h:h}return result},computedRgbToRgba:function(rgb,alpha){var a=rgb.replace(/[^\d,]/g,"").split(",");return void 0===alpha&&(alpha=1),a.push(alpha),"rgba("+a.join(",")+")"},computedRgbToArray:function(rgb){return rgb.replace(/[^\d,]/g,"").split(",")},hexColorToArray:function(hex){var c;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)?(3===(c=hex.substring(1).split("")).length&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]),[(c="0x"+c.join(""))>>16&255,c>>8&255,255&c]):[0,0,0]},hexColorToRgbA:function(hex,alpha){var c;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)?(3===(c=hex.substring(1).split("")).length&&(c=[c[0],c[0],c[1],c[1],c[2],c[2]]),"rgba("+[(c="0x"+c.join(""))>>16&255,c>>8&255,255&c,alpha||1].join(",")+")"):"rgba(0,0,0,1)"},getInlineStyles:function(el){var styles={};Utils.isJQueryObject(el)&&(el=el[0]);for(var i=0,l=el.style.length;i<l;i++){var s=el.style[i];styles[s]=el.style[s]}return styles},updateURIParameter:function(uri,key,value){var re=new RegExp("([?&])"+key+"=.*?(&|$)","i"),separator=-1!==uri.indexOf("?")?"&":"?";return uri.match(re)?uri.replace(re,"$1"+key+"="+value+"$2"):uri+separator+key+"="+value},getURIParameter:function(url,name){url||(url=window.location.href),name=name.replace(/[\[\]]/g,"\\$&");var results=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)").exec(url);return results?results[2]?decodeURIComponent(results[2].replace(/\+/g," ")):"":null},getLocales:function(){return Object.keys(Metro.locales)},addLocale:function(locale){Metro.locales=$.extend({},Metro.locales,locale)},strToArray:function(str,delimiter,type,format){return Utils.isValue(delimiter)||(delimiter=","),Utils.isValue(type)||(type="string"),(""+str).split(delimiter).map(function(s){var result;switch(type){case"int":case"integer":result=parseInt(s);break;case"number":case"float":result=parseFloat(s);break;case"date":result=Utils.isValue(format)?s.toDate(format):new Date(s);break;default:result=s.trim()}return result})},aspectRatioH:function(width,a){return"16/9"===a?9*width/16:"21/9"===a?9*width/21:"4/3"===a?3*width/4:void 0},aspectRatioW:function(height,a){return"16/9"===a?16*height/9:"21/9"===a?21*height/9:"4/3"===a?4*height/3:void 0},valueInObject:function(obj,value){return-1<Object.values(obj).indexOf(value)},keyInObject:function(obj,key){return-1<Object.keys(obj).indexOf(key)},inObject:function(obj,key,val){return void 0!==obj[key]&&obj[key]===val},newCssSheet:function(media){var style=document.createElement("style");return void 0!==media&&style.setAttribute("media",media),style.appendChild(document.createTextNode("")),document.head.appendChild(style),style.sheet},addCssRule:function(sheet,selector,rules,index){"insertRule"in sheet?sheet.insertRule(selector+"{"+rules+"}",index):"addRule"in sheet&&sheet.addRule(selector,rules,index)},media:function(query){return window.matchMedia(query).matches},mediaModes:function(){return METRO_MEDIA},mediaExist:function(media){return-1<METRO_MEDIA.indexOf(media)},inMedia:function(media){return-1<METRO_MEDIA.indexOf(media)&&METRO_MEDIA.indexOf(media)===METRO_MEDIA.length-1},isValue:function(val){return null!=val&&""!==val},isNull:function(val){return null==val},isNegative:function(val){return parseFloat(val)<0},isPositive:function(val){return 0<parseFloat(val)},isZero:function(val){return 0===parseFloat(val.toFixed(2))},between:function(val,bottom,top,equals){return!0===equals?bottom<=val&&val<=top:bottom<val&&val<top},parseMoney:function(val){return Number(parseFloat(val.replace(/[^0-9-.]/g,"")))},parseCard:function(val){return val.replace(/[^0-9]/g,"")},parsePhone:function(val){return Utils.parseCard(val)},isVisible:function(el){return Utils.isJQueryObject(el)&&(el=el[0]),"none"!==Utils.getStyleOne(el,"display")&&"hidden"!==Utils.getStyleOne(el,"visibility")&&null!==el.offsetParent},parseNumber:function(val,thousand,decimal){return val.replace(new RegExp("\\"+thousand,"g"),"").replace(new RegExp("\\"+decimal,"g"),".")},nearest:function(val,precision,down){return val/=precision,val=Math[!0===down?"floor":"ceil"](val)*precision},bool:function(value){switch(value){case!0:case"true":case 1:case"1":case"on":case"yes":return!0;default:return!1}},copy:function(el){var range,sel,body=document.body;if(Utils.isJQueryObject(el)&&(el=el[0]),document.createRange&&window.getSelection){range=document.createRange(),(sel=window.getSelection()).removeAllRanges();try{range.selectNodeContents(el),sel.addRange(range)}catch(e){range.selectNode(el),sel.addRange(range)}}else body.createTextRange&&((range=body.createTextRange()).moveToElementText(el),range.select());document.execCommand("Copy"),window.getSelection?window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges():document.selection&&document.selection.empty()},isLocalhost:function(){return"localhost"===location.hostname||"127.0.0.1"===location.hostname||""===location.hostname},formData:function(form){if(!Utils.isNull(form)&&(Utils.isJQueryObject(form)&&(form=form[0]),form&&"FORM"===form.nodeName)){var i,j,q={};for(i=form.elements.length-1;0<=i;i-=1)if(""!==form.elements[i].name)switch(form.elements[i].nodeName){case"INPUT":switch(form.elements[i].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":q[form.elements[i].name]=form.elements[i].value;break;case"checkbox":case"radio":form.elements[i].checked&&(q[form.elements[i].name]=form.elements[i].value)}break;case"file":break;case"TEXTAREA":q[form.elements[i].name]=form.elements[i].value;break;case"SELECT":switch(form.elements[i].type){case"select-one":q[form.elements[i].name]=form.elements[i].value;break;case"select-multiple":for(q[form.elements[i].name]=[],j=form.elements[i].options.length-1;0<=j;j-=1)form.elements[i].options[j].selected&&q[form.elements[i].name].push(form.elements[i].options[j].value)}break;case"BUTTON":switch(form.elements[i].type){case"reset":case"submit":case"button":q[form.elements[i].name]=form.elements[i].value}}return q}}};Metro.utils=Utils;var Animation={duration:METRO_ANIMATION_DURATION,func:"swing",switch:function(current,next){current.hide(),next.css({top:0,left:0}).show()},slideUp:function(current,next,duration,func){var h=current.parent().outerHeight(!0);void 0===duration&&(duration=this.duration),void 0===func&&(func=this.func),current.css("z-index",1).animate({top:-h,opacity:0},duration,func),next.css({top:h,left:0,zIndex:2}).animate({top:0,opacity:1},duration,func)},slideDown:function(current,next,duration,func){var h=current.parent().outerHeight(!0);void 0===duration&&(duration=this.duration),void 0===func&&(func=this.func),current.css("z-index",1).animate({top:h,opacity:0},duration,func),next.css({left:0,top:-h,zIndex:2}).animate({top:0,opacity:1},duration,func)},slideLeft:function(current,next,duration,func){var w=current.parent().outerWidth(!0);void 0===duration&&(duration=this.duration),void 0===func&&(func=this.func),current.css("z-index",1).animate({left:-w,opacity:0},duration,func),next.css({left:w,zIndex:2}).animate({left:0,opacity:1},duration,func)},slideRight:function(current,next,duration,func){var w=current.parent().outerWidth(!0);void 0===duration&&(duration=this.duration),void 0===func&&(func=this.func),current.css("z-index",1).animate({left:w,opacity:0},duration,func),next.css({left:-w,zIndex:2}).animate({left:0,opacity:1},duration,func)},fade:function(current,next,duration){void 0===duration&&(duration=this.duration),current.animate({opacity:0},duration),next.css({top:0,left:0}).animate({opacity:1},duration)}};Metro.animation=Animation;var ButtonGroup={init:function(options,elem){return this.options=$.extend({},this.options,options),this.elem=elem,this.element=$(elem),this.active=null,this._setOptionsFromDOM(),this._create(),this},options:{targets:"button",clsActive:"active",requiredButton:!1,mode:Metro.groupMode.ONE,onButtonClick:Metro.noop,onButtonsGroupCreate:Metro.noop},_setOptionsFromDOM:function(){var element=this.element,o=this.options;$.each(element.data(),function(key,value){if(key in o)try{o[key]=JSON.parse(value)}catch(e){o[key]=value}})},_create:function(){var element=this.element,o=this.options;this._createGroup(),this._createEvents(),Utils.exec(o.onButtonsGroupCreate,[element])},_createGroup:function(){var buttons,buttons_active,element=this.element,o=this.options,id=Utils.elementId("button-group");void 0===element.attr("id")&&element.attr("id",id),element.addClass("button-group"),buttons=element.find(o.targets),buttons_active=element.find("."+o.clsActive),o.mode===Metro.groupMode.ONE&&0===buttons_active.length&&!0===o.requiredButton&&$(buttons[0]).addClass(o.clsActive),o.mode===Metro.groupMode.ONE&&1<buttons_active.length&&(buttons.removeClass(o.clsActive),$(buttons[0]).addClass(o.clsActive)),element.find("."+o.clsActive).addClass("js-active")},_createEvents:function(){var element=this.element,o=this.options;element.on(Metro.events.click,o.targets,function(){var el=$(this);Utils.exec(o.onButtonClick,[el],this),o.mode===Metro.groupMode.ONE&&el.hasClass(o.clsActive)||(o.mode===Metro.groupMode.ONE?(element.find(o.targets).removeClass(o.clsActive).removeClass("js-active"),el.addClass(o.clsActive).addClass("js-active")):el.toggleClass(o.clsActive).toggleClass("js-active"))})},changeAttribute:function(attributeName){},destroy:function(){var element=this.element,o=this.options;element.off(Metro.events.click,o.targets),element.find(o.targets).removeClass(o.clsActive).removeClass("js-active")}};Metro.plugin("buttongroup",ButtonGroup);var Clock={init:function(options,elem){return this.options=$.extend({},this.options,options),this.elem=elem,this.element=$(elem),this._clockInterval=null,this._setOptionsFromDOM(),this._create(),Utils.exec(this.options.onClockCreate,[this.element]),this},options:{showTime:!0,showDate:!0,timeFormat:"24",dateFormat:"american",divider:"&nbsp;&nbsp;",onClockCreate:Metro.noop},_setOptionsFromDOM:function(){var element=this.element,o=this.options;$.each(element.data(),function(key,value){if(key in o)try{o[key]=JSON.parse(value)}catch(e){o[key]=value}})},_create:function(){var that=this;this._tick(),this._clockInterval=setInterval(function(){that._tick()},500)},_addLeadingZero:function(i){return i<10&&(i="0"+i),i},_tick:function(){var element=this.element,o=this.options,timestamp=new Date,result=(timestamp.getTime(),""),h=timestamp.getHours(),i=timestamp.getMinutes(),s=timestamp.getSeconds(),d=timestamp.getDate(),m=timestamp.getMonth()+1,y=timestamp.getFullYear();"12"===o.timeFormat&&(" AM",11<h&&" PM",12<h&&(h-=12),0===h&&(h=12)),h=this._addLeadingZero(h),i=this._addLeadingZero(i),s=this._addLeadingZero(s),m=this._addLeadingZero(m),d=this._addLeadingZero(d),o.showDate&&("american"===o.dateFormat?(result+="<span class='date-month'>"+m+"</span>",result+="<span class='date-divider'>-</span>",result+="<span class='date-day'>"+d+"</span>"):(result+="<span class='date-day'>"+d+"</span>",result+="<span class='date-divider'>-</span>",result+="<span class='date-month'>"+m+"</span>"),result+="<span class='date-divider'>-</span>",result+="<span class='date-year'>"+y+"</span>",result+=o.divider),o.showTime&&(result+="<span class='clock-hour'>"+h+"</span>",result+="<span class='clock-divider'>:</span>",result+="<span class='clock-minute'>"+i+"</span>",result+="<span class='clock-divider'>:</span>",result+="<span class='clock-second'>"+s+"</span>"),element.html(result)},changeAttribute:function(attributeName){},destroy:function(){clearInterval(this._clockInterval),this._clockInterval=null,this.element.html("")}};Metro.plugin("clock",Clock);var Cube={init:function(options,elem){return this.options=$.extend({},this.options,options),this.elem=elem,this.element=$(elem),this.id=null,this.rules=null,this.interval=!1,this.ruleInterval=!1,this.running=!1,this.intervals=[],this._setOptionsFromDOM(),this._create(),this},default_rules:[{on:{top:[16],left:[4],right:[1]},off:{top:[13,4],left:[1,16],right:[13,4]}},{on:{top:[12,15],left:[3,8],right:[2,5]},off:{top:[9,6,3],left:[5,10,15],right:[14,11,8]}},{on:{top:[11],left:[7],right:[6]},off:{top:[1,2,5],left:[9,13,14],right:[15,12,16]}},{on:{top:[8,14],left:[2,12],right:[9,3]},off:{top:[16],left:[4],right:[1]}},{on:{top:[10,7],left:[6,11],right:[10,7]},off:{top:[12,15],left:[3,8],right:[2,5]}},{on:{top:[13,4],left:[1,16],right:[13,4]},off:{top:[11],left:[7],right:[6]}},{on:{top:[9,6,3],left:[5,10,15],right:[14,11,8]},off:{top:[8,14],left:[2,12],right:[9,3]}},{on:{top:[1,2,5],left:[9,13,14],right:[15,12,16]},off:{top:[10,7],left:[6,11],right:[10,7]}}],options:{rules:null,color:null,flashColor:null,flashInterval:1e3,numbers:!1,offBefore:!0,attenuation:.3,stopOnBlur:!1,cells:4,margin:8,showAxis:!1,axisStyle:"arrow",cellClick:!1,autoRestart:5e3,clsCube:"",clsCell:"",clsSide:"",clsSideLeft:"",clsSideRight:"",clsSideTop:"",clsSideLeftCell:"",clsSideRightCell:"",clsSideTopCell:"",clsAxis:"",clsAxisX:"",clsAxisY:"",clsAxisZ:"",custom:Metro.noop,onTick:Metro.noop,onCubeCreate:Metro.noop},_setOptionsFromDOM:function(){var element=this.element,o=this.options;$.each(element.data(),function(key,value){if(key in o)try{o[key]=JSON.parse(value)}catch(e){o[key]=value}})},_create:function(){var element=this.element,o=this.options;null===o.rules?this.rules=this.default_rules:this._parseRules(o.rules),this._createCube(),this._createEvents(),Utils.exec(o.onCubeCreate,[element])},_parseRules:function(rules){if(null==rules)return!1;if(Utils.isObject(rules))return this.rules=Utils.isObject(rules),!0;try{return this.rules=JSON.parse(rules),!0}catch(err){return console.log("Unknown or empty rules for cell flashing!"),!1}},_createCube:function(){var element=this.element,o=this.options,id=Utils.elementId("cube"),cells_count=Math.pow(o.cells,2);element.addClass("cube").addClass(o.clsCube),void 0===element.attr("id")&&element.attr("id",id),this.id=element.attr("id"),this._createCssForFlashColor(),this._createCssForCellSize(),$.each(["left","right","top"],function(){var side,cell,i;for(side=$("<div>").addClass("side "+this+"-side").addClass(o.clsSide).appendTo(element),"left"===this&&side.addClass(o.clsSideLeft),"right"===this&&side.addClass(o.clsSideRight),"top"===this&&side.addClass(o.clsSideTop),i=0;i<cells_count;i++)(cell=$("<div>").addClass("cube-cell").addClass("cell-id-"+(i+1)).addClass(o.clsCell)).data("id",i+1).data("side",this),cell.appendTo(side),!0===o.numbers&&cell.html(i+1)});var cells=element.find(".cube-cell");null!==o.color&&(Utils.isColor(o.color)?cells.css({backgroundColor:o.color,borderColor:o.color}):cells.addClass(o.color));$.each(["x","y","z"],function(){var ax=$("<div>").addClass("axis "+o.axisStyle).addClass("axis-"+this).addClass(o.clsAxis);"x"===this&&ax.addClass(o.clsAxisX),"y"===this&&ax.addClass(o.clsAxisY),"z"===this&&ax.addClass(o.clsAxisZ),ax.appendTo(element)}),!1===o.showAxis&&element.find(".axis").hide(),this._run()},_run:function(){var that=this,element=this.element,o=this.options,interval=0;clearInterval(this.interval),element.find(".cube-cell").removeClass("light"),o.custom!==Metro.noop?Utils.exec(o.custom,[element]):(element.find(".cube-cell").removeClass("light"),that._start(),interval=Utils.isObject(this.rules)?Utils.objectLength(this.rules):0,this.interval=setInterval(function(){that._start()},interval*o.flashInterval))},_createCssForCellSize:function(){var width,cell_size,element=this.element,o=this.options,sheet=Metro.sheet;8===o.margin&&4===o.cells||(width=parseInt(Utils.getStyleOne(element,"width")),cell_size=Math.ceil((width/2-o.margin*o.cells*2)/o.cells),Utils.addCssRule(sheet,"#"+element.attr("id")+" .side .cube-cell","width: "+cell_size+"px!important; height: "+cell_size+"px!important; margin: "+o.margin+"px!important;"))},_createCssForFlashColor:function(){var rule1,rule2,i,element=this.element,o=this.options,sheet=Metro.sheet,rules1=[],rules2=[];if(null!==o.flashColor){for(rule1="0 0 10px "+Utils.hexColorToRgbA(o.flashColor,1),rule2="0 0 10px "+Utils.hexColorToRgbA(o.flashColor,o.attenuation),i=0;i<3;i++)rules1.push(rule1),rules2.push(rule2);Utils.addCssRule(sheet,"@keyframes pulsar-cell-"+element.attr("id"),"0%, 100% { box-shadow: "+rules1.join(",")+"} 50% { box-shadow: "+rules2.join(",")+" }"),Utils.addCssRule(sheet,"#"+element.attr("id")+" .side .cube-cell.light","animation: pulsar-cell-"+element.attr("id")+" 2.5s 0s ease-out infinite; background-color: "+o.flashColor+"!important; border-color: "+o.flashColor+"!important;")}},_createEvents:function(){var that=this,element=this.element,o=this.options;$(window).on(Metro.events.blur+"-"+element.attr("id"),function(){!0===o.stopOnBlur&&!0===that.running&&that._stop()}),$(window).on(Metro.events.focus+"-"+element.attr("id"),function(){!0===o.stopOnBlur&&!1===that.running&&that._start()}),element.on(Metro.events.click,".cube-cell",function(){!0===o.cellClick&&$(this).toggleClass("light")})},_start:function(){var that=this,element=this.element;this.options;element.find(".cube-cell").removeClass("light"),this.running=!0,$.each(this.rules,function(index,rule){that._execRule(index,rule)})},_stop:function(){this.running=!1,clearInterval(this.interval),$.each(this.intervals,function(){clearInterval(this)})},_tick:function(index,speed){var that=this,element=this.element,o=this.options;void 0===speed&&(speed=o.flashInterval*index);var interval=setTimeout(function(){Utils.exec(o.onTick,[index],element[0]),clearInterval(interval),Utils.arrayDelete(that.intervals,interval)},speed);this.intervals.push(interval)},_toggle:function(cell,func,time,speed){var that=this;void 0===speed&&(speed=this.options.flashInterval*time);var interval=setTimeout(function(){cell["on"===func?"addClass":"removeClass"]("light"),clearInterval(interval),Utils.arrayDelete(that.intervals,interval)},speed);this.intervals.push(interval)},start:function(){this._start()},stop:function(){this._stop()},toRule:function(index,speed){var that=this,element=this.element,o=this.options,rules=this.rules;if(null!=rules&&void 0!==rules[index]){clearInterval(this.ruleInterval),this.ruleInterval=!1,this.stop(),element.find(".cube-cell").removeClass("light");for(var i=0;i<=index;i++)this._execRule(i,rules[i],speed);Utils.isInt(o.autoRestart)&&0<o.autoRestart&&(this.ruleInterval=setTimeout(function(){that._run()},o.autoRestart))}},_execRule:function(index,rule,speed){var that=this,element=this.element;this.options;this._tick(index,speed),$.each(["left","right","top"],function(){var side_class="."+this+"-side",cells_on=void 0!==rule.on&&void 0!==rule.on[this]&&rule.on[this],cells_off=void 0!==rule.off&&void 0!==rule.off[this]&&rule.off[this];!1!==cells_on&&$.each(cells_on,function(){var cell=element.find(side_class+" .cell-id-"+this);that._toggle(cell,"on",index,speed)}),!1!==cells_off&&$.each(cells_off,function(){var cell=element.find(side_class+" .cell-id-"+this);that._toggle(cell,"off",index,speed)})})},rule:function(r){if(void 0===r)return this.rules;!0===this._parseRules(r)&&(this.options.rules=r,this.stop(),this.element.find(".cube-cell").removeClass("light"),this._run())},axis:function(show){var func=!0===show?"show":"hide";this.element.find(".axis")[func]()},changeRules:function(){var element=this.element,o=this.options,rules=element.attr("data-rules");!0===this._parseRules(rules)&&(this.stop(),element.find(".cube-cell").removeClass("light"),o.rules=rules,this._run())},changeAxisVisibility:function(){var element=this.element,func=(this.options,!0===JSON.parse(element.attr("data-show-axis"))?"show":"hide");element.find(".axis")[func]()},changeAxisStyle:function(){var element=this.element,style=(this.options,element.attr("data-axis-style"));element.find(".axis").removeClass("arrow line no-style").addClass(style)},changeAttribute:function(attributeName){switch(attributeName){case"data-rules":this.changeRules();break;case"data-show-axis":this.changeAxisVisibility();break;case"data-axis-style":this.changeAxisStyle()}},destroy:function(){var element=this.element,o=this.options;clearInterval(this.interval),this.interval=null,$(window).off(Metro.events.blur+"-"+element.attr("id")),$(window).off(Metro.events.focus+"-"+element.attr("id")),element.off(Metro.events.click,".cube-cell"),element.html(""),element.removeClass("cube").removeClass(o.clsCube)}};Metro.plugin("cube",Cube);var NavigationView={init:function(options,elem){return this.options=$.extend({},this.options,options),this.elem=elem,this.element=$(elem),this.pane=null,this.content=null,this.paneToggle=null,this._setOptionsFromDOM(),this._create(),this},options:{compact:"md",expanded:"lg",toggle:null,onNavigationViewCreate:Metro.noop},_setOptionsFromDOM:function(){var element=this.element,o=this.options;$.each(element.data(),function(key,value){if(key in o)try{o[key]=JSON.parse(value)}catch(e){o[key]=value}})},_create:function(){var element=this.element,o=this.options;this._createView(),this._createEvents(),Utils.exec(o.onNavigationViewCreate,[element])},_createView:function(){var pane,content,toggle,menu,element=this.element,o=this.options;if(element.addClass("navview").addClass(!1!==o.compact?"compact-"+o.compact:"").addClass(!1!==o.expanded?"expanded-"+o.expanded:""),pane=element.children(".navview-pane"),content=element.children(".navview-content"),toggle=$(o.toggle),0<(menu=pane.find(".navview-menu")).length){var elements_height=0;$.each(menu.prevAll(),function(){elements_height+=$(this).outerHeight(!0)}),$.each(menu.nextAll(),function(){elements_height+=$(this).outerHeight(!0)}),menu.css({height:"calc(100% - "+(elements_height+20)+"px)"})}this.pane=0<pane.length?pane:null,this.content=0<content.length?content:null,this.paneToggle=0<toggle.length?toggle:null},_createEvents:function(){var that=this,element=this.element,o=this.options,pane=this.pane;this.content;element.on(Metro.events.click,".pull-button, .holder",function(e){var input,pane_compact=pane.width()<280,target=$(this);if(target.hasClass("holder")&&(input=target.parent().find("input"),setTimeout(function(){input.focus()},200)),that.pane.hasClass("open"))that.close();else if(!pane_compact&&!element.hasClass("expand")||element.hasClass("compacted")){if(!element.hasClass("compacted")&&pane_compact)return!0;element.toggleClass("compacted")}else element.toggleClass("expand")}),null!==this.paneToggle&&this.paneToggle.on(Metro.events.click,function(){that.pane.toggleClass("open")}),$(window).on(Metro.events.resize,function(){element.removeClass("expand"),that.pane.removeClass("open"),$(this).width()<=Metro.media_sizes[String(o.compact).toUpperCase()]&&element.removeClass("compacted")})},open:function(){this.pane.addClass("open")},close:function(){this.pane.removeClass("open")},changeAttribute:function(attributeName){}};Metro.plugin("navview",NavigationView);var Select={init:function(options,elem){return this.options=$.extend({},this.options,options),this.elem=elem,this.element=$(elem),this.list=null,this._setOptionsFromDOM(),this._create(),Utils.exec(this.options.onSelectCreate,[this.element]),this},options:{duration:100,prepend:"",append:"",placeholder:"",filterPlaceholder:"",filter:!0,copyInlineStyles:!0,dropHeight:200,clsSelect:"",clsSelectInput:"",clsPrepend:"",clsAppend:"",clsOption:"",clsOptionActive:"",clsOptionGroup:"",clsDropList:"",clsSelectedItem:"",clsSelectedItemRemover:"",onChange:Metro.noop,onUp:Metro.noop,onDrop:Metro.noop,onItemSelect:Metro.noop,onItemDeselect:Metro.noop,onSelectCreate:Metro.noop},_setOptionsFromDOM:function(){var element=this.element,o=this.options;$.each(element.data(),function(key,value){if(key in o)try{o[key]=JSON.parse(value)}catch(e){o[key]=value}})},_create:function(){this._createSelect(),this._createEvents()},_addOption:function(item,parent){var l,a,tag,option=$(item),element=this.element,o=this.options,multiple=element[0].multiple,input=element.siblings(".select-input"),html=Utils.isValue(option.attr("data-template"))?option.attr("data-template").replace("$1",item.text):item.text;l=$("<li>").addClass(o.clsOption).data("option",item).attr("data-text",item.text).attr("data-value",Utils.isValue(item.value)?item.value:"").appendTo(parent),a=$("<a>").html(html).appendTo(l).addClass(item.className),option.is(":selected")&&(multiple?(l.addClass("d-none"),(tag=$("<div>").addClass("selected-item").addClass(o.clsSelectedItem).html("<span class='title'>"+html+"</span>").appendTo(input)).data("option",l),$("<span>").addClass("remover").addClass(o.clsSelectedItemRemover).html("&times;").appendTo(tag)):(element.val(item.value),input.html(html),element.trigger("change"),l.addClass("active"))),a.appendTo(l),l.appendTo(parent)},_addOptionGroup:function(item,parent){var that=this,group=$(item);$("<li>").html(item.label).addClass("group-title").appendTo(parent),$.each(group.children(),function(){that._addOption(this,parent)})},_createOptions:function(){var that=this,element=this.element,list=element.parent().find("ul").html("");$.each(element.children(),function(){"OPTION"===this.tagName?that._addOption(this,list):"OPTGROUP"===this.tagName&&that._addOptionGroup(this,list)})},_createSelect:function(){var input,drop_container,list,filter_input,element=this.element,o=this.options,prev=element.prev(),parent=element.parent(),container=$("<label>").addClass("select "+element[0].className).addClass(o.clsSelect),multiple=element[0].multiple,select_id=Utils.elementId("select"),buttons=$("<div>").addClass("button-group");(container.attr("id",select_id).addClass("dropdown-toggle"),multiple&&container.addClass("multiple"),0===prev.length?parent.prepend(container):container.insertAfter(prev),element.appendTo(container),buttons.appendTo(container),input=$("<div>").addClass("select-input").addClass(o.clsSelectInput).attr("name","__"+select_id+"__"),drop_container=$("<div>").addClass("drop-container"),list=$("<ul>").addClass("d-menu").addClass(o.clsDropList).css({"max-height":o.dropHeight}),filter_input=$("<input type='text' data-role='input'>").attr("placeholder",o.filterPlaceholder),container.append(input),container.append(drop_container),drop_container.append(filter_input),!0!==o.filter&&filter_input.hide(),drop_container.append(list),this._createOptions(),drop_container.dropdown({duration:o.duration,toggleElement:"#"+select_id,onDrop:function(){var dropped,target;dropped=$(".select .drop-container"),$.each(dropped,function(){var drop=$(this);drop.is(drop_container)||drop.data("dropdown").close()}),filter_input.val("").trigger(Metro.events.keyup).focus(),void 0!==(target=0<list.find("li.active").length?$(list.find("li.active")[0]):void 0)&&(list.scrollTop(0),setTimeout(function(){list.animate({scrollTop:target.position().top-(list.height()-target.height())/2},100)},200)),Utils.exec(o.onDrop,[list,element],list[0])},onUp:function(){Utils.exec(o.onUp,[list,element],list[0])}}),this.list=list,""!==o.prepend)&&$("<div>").html(o.prepend).addClass("prepend").addClass(o.clsPrepend).appendTo(container);""!==o.append&&$("<div>").html(o.append).addClass("append").addClass(o.clsAppend).appendTo(container);if(!0===o.copyInlineStyles)for(var i=0,l=element[0].style.length;i<l;i++)container.css(element[0].style[i],element.css(element[0].style[i]));"rtl"===element.attr("dir")&&container.addClass("rtl").attr("dir","rtl"),element.is(":disabled")?this.disable():this.enable()},_createEvents:function(){var that=this,element=this.element,o=this.options,container=element.closest(".select"),drop_container=container.find(".drop-container"),input=element.siblings(".select-input"),filter_input=drop_container.find("input"),list=drop_container.find("ul");container.on(Metro.events.click,function(e){$(".focused").removeClass("focused"),container.addClass("focused"),e.preventDefault(),e.stopPropagation()}),input.on(Metro.events.click,function(e){$(".focused").removeClass("focused"),container.addClass("focused"),e.preventDefault(),e.stopPropagation()}),list.on(Metro.events.click,"li",function(e){if($(this).hasClass("group-title"))return e.preventDefault(),void e.stopPropagation();var selected_item,leaf=$(this),val=leaf.data("value"),html=(leaf.data("text"),leaf.children("a").html()),option=leaf.data("option"),options=element.find("option");element[0].multiple?(leaf.addClass("d-none"),(selected_item=$("<div>").addClass("selected-item").addClass(o.clsSelectedItem).html("<span class='title'>"+html+"</span>").appendTo(input)).data("option",leaf),$("<span>").addClass("remover").addClass(o.clsSelectedItemRemover).html("&times;").appendTo(selected_item)):(list.find("li.active").removeClass("active").removeClass(o.clsOptionActive),leaf.addClass("active").addClass(o.clsOptionActive),input.html(html),drop_container.data("dropdown").close()),$.each(options,function(){this===option&&(this.selected=!0)}),element.trigger("change"),Utils.exec(o.onItemSelect,[val,option,leaf],element[0]),Utils.exec(o.onChange,[that.getSelected()],element[0])}),input.on("click",".selected-item .remover",function(e){var item=$(this).closest(".selected-item"),leaf=item.data("option"),option=leaf.data("option");leaf.removeClass("d-none"),$.each(element.find("option"),function(){this===option&&(this.selected=!1)}),item.remove(),element.trigger("change"),Utils.exec(o.onItemDeselect,[option],element[0]),Utils.exec(o.onChange,[that.getSelected()],element[0]),e.preventDefault(),e.stopPropagation()}),filter_input.on(Metro.events.keyup,function(){var i,filter=this.value.toUpperCase(),li=list.find("li");for(i=0;i<li.length;i++)$(li[i]).hasClass("group-title")||(-1<li[i].getElementsByTagName("a")[0].innerHTML.toUpperCase().indexOf(filter)?li[i].style.display="":li[i].style.display="none")}),drop_container.on(Metro.events.click,function(e){e.preventDefault(),e.stopPropagation()})},disable:function(){this.element.data("disabled",!0),this.element.closest(".select").addClass("disabled")},enable:function(){this.element.data("disabled",!1),this.element.closest(".select").removeClass("disabled")},toggleState:function(){this.elem.disabled?this.disable():this.enable()},reset:function(to_default){var element=this.element,o=this.options,options=element.find("option"),select=element.closest(".select");$.each(options,function(){this.selected=!Utils.isNull(to_default)&&this.defaultSelected}),this.list.find("li").remove(),select.find(".select-input").html(""),this._createOptions(),element.trigger("change"),Utils.exec(o.onChange,[this.getSelected()],element[0])},getSelected:function(){var element=this.element,result=[];return element.find("option:selected").each(function(){result.push(this.value)}),result},val:function(val){var option,i,html,list_item,tag,element=this.element,o=this.options,input=element.siblings(".select-input"),options=element.find("option"),list_items=this.list.find("li"),result=[],multiple=void 0!==element.attr("multiple");if(Utils.isNull(val))return $.each(options,function(){this.selected&&result.push(this.value)}),multiple?result:result[0];$.each(options,function(){this.selected=!1}),list_items.removeClass("active"),input.html(""),!1===Array.isArray(val)&&(val=[val]),$.each(val,function(){for(i=0;i<options.length;i++)if(option=options[i],html=Utils.isValue(option.getAttribute("data-template"))?option.getAttribute("data-template").replace("$1",option.text):option.text,""+option.value==""+this){option.selected=!0;break}for(i=0;i<list_items.length;i++)if(list_item=$(list_items[i]),""+list_item.attr("data-value")==""+this){multiple?(list_item.addClass("d-none"),(tag=$("<div>").addClass("selected-item").addClass(o.clsSelectedItem).html("<span class='title'>"+html+"</span>").appendTo(input)).data("option",list_item),$("<span>").addClass("remover").addClass(o.clsSelectedItemRemover).html("&times;").appendTo(tag)):(list_item.addClass("active"),input.html(html));break}}),element.trigger("change"),Utils.exec(o.onChange,[this.getSelected()],element[0])},data:function(op){var option_group,element=this.element;element.html(""),"string"==typeof op?element.html(op):Utils.isObject(op)&&$.each(op,function(key,val){Utils.isObject(val)?(option_group=$("<optgroup>").attr("label",key).appendTo(element),$.each(val,function(key2,val2){$("<option>").attr("value",key2).text(val2).appendTo(option_group)})):$("<option>").attr("value",key).text(val).appendTo(element)}),this._createOptions()},changeAttribute:function(attributeName){switch(attributeName){case"disabled":this.toggleState()}},destroy:function(){var element=this.element,container=element.closest(".select"),drop_container=container.find(".drop-container"),input=element.siblings(".select-input"),filter_input=drop_container.find("input"),list=drop_container.find("ul");container.off(Metro.events.click),container.off(Metro.events.click,".input-clear-button"),input.off(Metro.events.click),filter_input.off(Metro.events.blur),filter_input.off(Metro.events.focus),list.off(Metro.events.click,"li"),filter_input.off(Metro.events.keyup),drop_container.off(Metro.events.click),Metro.destroyPlugin(drop_container,"dropdown"),element.insertBefore(container),container.remove()}};$(document).on(Metro.events.click,function(){var selects=$(".select .drop-container");$.each(selects,function(){$(this).data("dropdown").close()}),$(".select").removeClass("focused")}),Metro.plugin("select",Select);var Dropdown={init:function(options,elem){return this.options=$.extend({},this.options,options),this.elem=elem,this.element=$(elem),this._toggle=null,this.displayOrigin=null,this._setOptionsFromDOM(),this._create(),Utils.exec(this.options.onDropdownCreate,[this.element]),this},options:{effect:"slide",toggleElement:null,noClose:!1,duration:100,onDrop:Metro.noop,onUp:Metro.noop,onDropdownCreate:Metro.noop},_setOptionsFromDOM:function(){var element=this.element,o=this.options;$.each(element.data(),function(key,value){if(key in o)try{o[key]=JSON.parse(value)}catch(e){o[key]=value}})},_create:function(){var toggle,that=this,element=this.element,o=this.options,parent=element.parent(),element_roles=Utils.isValue(element.attr("data-role"))?Utils.strToArray(element.attr("data-role")):[];toggle=null!==o.toggleElement?$(o.toggleElement):0<element.siblings(".dropdown-toggle").length?element.siblings(".dropdown-toggle"):element.prev(),this.displayOrigin=element.css("display"),element.hasClass("v-menu")&&element.addClass("for-dropdown"),element.css("display","none"),0!==element_roles.length&&-1!==element_roles.indexOf("dropdown")||(element_roles.push("dropdown"),element.attr("data-role",element_roles.join(", "))),toggle.on(Metro.events.click,function(e){if(parent.siblings(parent[0].tagName).removeClass("active-container"),$(".active-container").removeClass("active-container"),"none"===element.css("display")||element.hasClass("keep-open")){if($("[data-role=dropdown]").each(function(i,el){element.parents("[data-role=dropdown]").is(el)||$(el).hasClass("keep-open")||"none"===$(el).css("display")||that._close(el)}),element.hasClass("horizontal")){element.css({visibility:"hidden",display:"block"});var children_width=0;$.each(element.children("li"),function(){children_width+=$(this).outerWidth(!0)}),element.css({visibility:"visible",display:"none"}),element.css("width",children_width)}that._open(element),parent.addClass("active-container")}else that._close(element);e.preventDefault(),e.stopPropagation()}),this._toggle=toggle,!0===o.noClose&&element.addClass("keep-open").on(Metro.events.click,function(e){e.stopPropagation()}),$(element).find("li.disabled a").on(Metro.events.click,function(e){e.preventDefault()})},_close:function(el){!1===Utils.isJQueryObject(el)&&(el=$(el));var dropdown=el.data("dropdown"),toggle=dropdown._toggle,options=dropdown.options,func="slide"===options.effect?"slideUp":"fadeOut";toggle.removeClass("active-toggle").removeClass("active-control"),dropdown.element.parent().removeClass("active-container"),el[func](options.duration,function(){el.trigger("onClose",null,el)}),Utils.exec(options.onUp,[el])},_open:function(el){!1===Utils.isJQueryObject(el)&&(el=$(el));var dropdown=el.data("dropdown"),toggle=dropdown._toggle,options=dropdown.options,func="slide"===options.effect?"slideDown":"fadeIn";toggle.addClass("active-toggle").addClass("active-control"),el[func](options.duration,function(){el.trigger("onOpen",null,el)}),Utils.exec(options.onDrop,[el])},close:function(){this._close(this.element)},open:function(){this._open(this.element)},changeAttribute:function(attributeName){},destroy:function(){this._toggle.off(Metro.events.click)}};$(document).on(Metro.events.click,function(e){$("[data-role*=dropdown]").each(function(){var el=$(this);"block"===el.css("display")&&!1===el.hasClass("keep-open")&&el.data("dropdown").close()})}),Metro.plugin("dropdown",Dropdown);var Sidebar={init:function(options,elem){return this.options=$.extend({},this.options,options),this.elem=elem,this.element=$(elem),this.toggle_element=null,this._setOptionsFromDOM(),this._create(),this},options:{shadow:!0,position:"left",size:290,shift:null,staticShift:null,toggle:null,duration:METRO_ANIMATION_DURATION,static:null,menuItemClick:!0,onOpen:Metro.noop,onClose:Metro.noop,onToggle:Metro.noop,onStaticSet:Metro.noop,onStaticLoss:Metro.noop,onSidebarCreate:Metro.noop},_setOptionsFromDOM:function(){var element=this.element,o=this.options;$.each(element.data(),function(key,value){if(key in o)try{o[key]=JSON.parse(value)}catch(e){o[key]=value}})},_create:function(){var element=this.element,o=this.options;this._createStructure(),this._createEvents(),$(window).resize(),this._checkStatic(),Utils.exec(o.onSidebarCreate,[element],element[0])},_createStructure:function(){var element=this.element,o=this.options,header=element.find(".sidebar-header"),sheet=Metro.sheet;element.addClass("sidebar").addClass("on-"+o.position),290!==o.size&&(Utils.addCssRule(sheet,".sidebar","width: "+o.size+"px;"),"left"===o.position?Utils.addCssRule(sheet,".sidebar.on-left","left: "+-o.size+"px;"):Utils.addCssRule(sheet,".sidebar.on-right","right: "+-o.size+"px;")),!0===o.shadow&&element.addClass("sidebar-shadow"),void 0===element.attr("id")&&element.attr("id",Utils.elementId("sidebar")),null!==o.toggle&&0<$(o.toggle).length&&(this.toggle_element=$(o.toggle)),0<header.length&&void 0!==header.data("image")&&header.css({backgroundImage:"url("+header.data("image")+")"}),null!==o.static&&null!==o.staticShift&&("left"===o.position?Utils.addCssRule(sheet,"@media screen and "+Metro.media_queries[o.static.toUpperCase()],o.staticShift+"{margin-left: "+o.size+"px; width: calc(100% - "+o.size+"px);}"):Utils.addCssRule(sheet,"@media screen and "+Metro.media_queries[o.static.toUpperCase()],o.staticShift+"{margin-right: "+o.size+"px; width: calc(100% - "+o.size+"px);}"))},_createEvents:function(){var that=this,element=this.element,o=this.options,toggle=this.toggle_element;null!==toggle&&toggle.on(Metro.events.click,function(e){that.toggle()}),null!==o.static&&-1<["fs","sm","md","lg","xl","xxl"].indexOf(o.static)&&$(window).on(Metro.events.resize+"_"+element.attr("id"),function(){that._checkStatic()}),!0===o.menuItemClick&&element.on(Metro.events.click,".sidebar-menu li > a",function(){that.close()}),element.on(Metro.events.click,".sidebar-menu .js-sidebar-close",function(){that.close()})},_checkStatic:function(){var element=this.element,o=this.options;Utils.mediaExist(o.static)&&!element.hasClass("static")&&(element.addClass("static"),element.data("opened",!1).removeClass("open"),null!==o.shift&&$.each(o.shift.split(","),function(){$(this).css({left:0},o.duration)}),Utils.exec(o.onStaticSet,[element],element[0])),Utils.mediaExist(o.static)||(element.removeClass("static"),Utils.exec(o.onStaticLoss,[element],element[0]))},isOpen:function(){return!0===this.element.data("opened")},open:function(){var element=this.element,o=this.options;element.hasClass("static")||(element.data("opened",!0).addClass("open"),null!==o.shift&&$(o.shift).animate({left:element.outerWidth()},o.duration),Utils.exec(o.onOpen,[element],element[0]))},close:function(){var element=this.element,o=this.options;element.hasClass("static")||(element.data("opened",!1).removeClass("open"),null!==o.shift&&$(o.shift).animate({left:0},o.duration),Utils.exec(o.onClose,[element],element[0]))},toggle:function(){this.isOpen()?this.close():this.open(),Utils.exec(this.options.onToggle,[this.element],this.element[0])},changeAttribute:function(attributeName){},destroy:function(){}};Metro.plugin("sidebar",Sidebar);var Splitter={init:function(options,elem){return this.options=$.extend({},this.options,options),this.elem=elem,this.element=$(elem),this.storage=Utils.isValue(Metro.storage)?Metro.storage:null,this.storageKey="SPLITTER:",this._setOptionsFromDOM(),this._create(),this},options:{splitMode:"horizontal",splitSizes:null,gutterSize:4,minSizes:null,children:"*",gutterClick:"expand",saveState:!(Metro.sidebar={isSidebar:function(el){return Utils.isMetroObject(el,"sidebar")},open:function(el){this.isSidebar(el)&&$(el).data("sidebar").open()},close:function(el){this.isSidebar(el)&&$(el).data("sidebar").close()},toggle:function(el){this.isSidebar(el)&&$(el).data("sidebar").toggle()},isOpen:function(el){if(this.isSidebar(el))return $(el).data("sidebar").isOpen()}}),onResizeStart:Metro.noop,onResizeStop:Metro.noop,onResizeSplit:Metro.noop,onSplitterCreate:Metro.noop},_setOptionsFromDOM:function(){var element=this.element,o=this.options;$.each(element.data(),function(key,value){if(key in o)try{o[key]=JSON.parse(value)}catch(e){o[key]=value}})},_create:function(){var element=this.element,o=this.options;this._createStructure(),this._createEvents(),Utils.exec(o.onCreate,[element])},_createStructure:function(){var i,gutters,element=this.element,o=this.options,children=element.children(o.children).addClass("split-block"),children_sizes=[],resizeProp="horizontal"===o.splitMode?"width":"height";for(Utils.isValue(element.attr("id"))||element.attr("id",Utils.elementId("splitter")),element.addClass("splitter"),"vertical"===o.splitMode.toLowerCase()&&element.addClass("vertical"),i=0;i<children.length-1;i++)$("<div>").addClass("gutter").css(resizeProp,o.gutterSize).insertAfter($(children[i]));if(gutters=element.children(".gutter"),Utils.isValue(o.splitSizes))for(children_sizes=Utils.strToArray(o.splitSizes),i=0;i<children_sizes.length;i++)$(children[i]).css({flexBasis:"calc("+children_sizes[i]+"% - "+gutters.length*o.gutterSize+"px)"});else children.css({flexBasis:"calc("+100/children.length+"% - "+gutters.length*o.gutterSize+"px)"});if(Utils.isValue(o.minSizes))if(String(o.minSizes).contains(","))for(children_sizes=Utils.strToArray(o.minSizes),i=0;i<children_sizes.length;i++)$(children[i]).data("min-size",children_sizes[i]),children[i].style.setProperty("min-"+resizeProp,String(children_sizes[i]).contains("%")?children_sizes[i]:String(children_sizes[i]).replace("px","")+"px","important");else $.each(children,function(){this.style.setProperty("min-"+resizeProp,String(o.minSizes).contains("%")?o.minSizes:String(o.minSizes).replace("px","")+"px","important")});o.saveState&&null!==this.storage&&this._getSize()},_createEvents:function(){var that=this,element=this.element,o=this.options,gutters=element.children(".gutter");gutters.on(Metro.events.start,function(e){var w="horizontal"===o.splitMode?element.width():element.height(),gutter=$(this),prev_block=gutter.prev(".split-block"),next_block=gutter.next(".split-block"),prev_block_size=100*("horizontal"===o.splitMode?prev_block.outerWidth(!0):prev_block.outerHeight(!0))/w,next_block_size=100*("horizontal"===o.splitMode?next_block.outerWidth(!0):next_block.outerHeight(!0))/w,start_pos=Utils.getCursorPosition(element,e);gutter.addClass("active"),prev_block.addClass("stop-select stop-pointer"),next_block.addClass("stop-select stop-pointer"),Utils.exec(o.onResizeStart,[start_pos,gutter,prev_block,next_block],element),$(window).on(Metro.events.move+"-"+element.attr("id"),function(e){var new_pos,pos=Utils.getCursorPosition(element,e);new_pos="horizontal"===o.splitMode?100*pos.x/w-100*start_pos.x/w:100*pos.y/w-100*start_pos.y/w,prev_block.css("flex-basis","calc("+(prev_block_size+new_pos)+"% - "+gutters.length*o.gutterSize+"px)"),next_block.css("flex-basis","calc("+(next_block_size-new_pos)+"% - "+gutters.length*o.gutterSize+"px)"),Utils.exec(o.onResizeSplit,[pos,gutter,prev_block,next_block],element)}),$(window).on(Metro.events.stop+"-"+element.attr("id"),function(e){prev_block.removeClass("stop-select stop-pointer"),next_block.removeClass("stop-select stop-pointer"),that._saveSize(),gutter.removeClass("active"),$(window).off(Metro.events.move+"-"+element.attr("id")),$(window).off(Metro.events.stop+"-"+element.attr("id")),Utils.exec(o.onResizeStop,[Utils.getCursorPosition(element,e),gutter,prev_block,next_block],element)})})},_saveSize:function(){var element=this.element,o=this.options,storage=this.storage,itemsSize=[];!0===o.saveState&&null!==storage&&($.each(element.children(".split-block"),function(){var item=$(this);itemsSize.push(item.css("flex-basis"))}),storage.setItem(this.storageKey+element.attr("id"),itemsSize))},_getSize:function(){var element=this.element,o=this.options,storage=this.storage,itemsSize=[];!0===o.saveState&&null!==storage&&(itemsSize=storage.getItem(this.storageKey+element.attr("id")),$.each(element.children(".split-block"),function(i,v){var item=$(v);Utils.isValue(itemsSize)&&Utils.isValue(itemsSize[i])&&item.css("flex-basis",itemsSize[i])}))},changeAttribute:function(attributeName){},destroy:function(){}};Metro.plugin("splitter",Splitter);var Treeview={init:function(options,elem){return this.options=$.extend({},this.options,options),this.elem=elem,this.element=$(elem),this._setOptionsFromDOM(),this._create(),this},options:{effect:"slide",duration:100,onNodeClick:Metro.noop,onNodeDblClick:Metro.noop,onNodeDelete:Metro.noop,onNodeInsert:Metro.noop,onNodeClean:Metro.noop,onCheckClick:Metro.noop,onRadioClick:Metro.noop,onExpandNode:Metro.noop,onCollapseNode:Metro.noop,onTreeviewCreate:Metro.noop},_setOptionsFromDOM:function(){var element=this.element,o=this.options;$.each(element.data(),function(key,value){if(key in o)try{o[key]=JSON.parse(value)}catch(e){o[key]=value}})},_create:function(){var that=this,element=this.element,o=this.options;this._createTree(),this._createEvents(),$.each(element.find("input"),function(){$(this).is(":checked")&&that._recheck(this)}),Utils.exec(o.onTreeviewCreate,[element],element[0])},_createIcon:function(data){var icon,src;return src=Utils.isTag(data)?$(data):$("<img>").attr("src",data),(icon=$("<span>").addClass("icon")).html(src),icon},_createCaption:function(data){return $("<span>").addClass("caption").html(data)},_createToggle:function(){return $("<span>").addClass("node-toggle")},_createNode:function(data){var node;return node=$("<li>"),void 0!==data.caption&&node.prepend(this._createCaption(data.caption)),void 0!==data.icon&&node.prepend(this._createIcon(data.icon)),void 0!==data.html&&node.append(data.html),node},_createTree:function(){var that=this,element=this.element,nodes=(this.options,element.find("li"));element.addClass("treeview"),$.each(nodes,function(){var node=$(this);void 0!==node.data("caption")&&node.prepend(that._createCaption(node.data("caption"))),void 0!==node.data("icon")&&node.prepend(that._createIcon(node.data("icon"))),0<node.children("ul").length&&(node.append(that._createToggle()),!0!==node.data("collapsed")?node.addClass("expanded"):node.children("ul").hide())})},_createEvents:function(){var that=this,element=this.element,o=this.options;element.on(Metro.events.click,".node-toggle",function(e){var node=$(this).parent();that.toggleNode(node),e.preventDefault()}),element.on(Metro.events.click,"li > .caption",function(e){var node=$(this).parent();that.current(node),Utils.exec(o.onNodeClick,[node,element],node[0]),e.preventDefault()}),element.on(Metro.events.dblclick,"li > .caption",function(e){var node=$(this).closest("li"),toggle=node.children(".node-toggle"),subtree=node.children("ul");(0<toggle.length||0<subtree.length)&&that.toggleNode(node),Utils.exec(o.onNodeDblClick,[node,element],node[0]),e.preventDefault()}),element.on(Metro.events.click,"input[type=radio]",function(e){var check=$(this),checked=check.is(":checked"),node=check.closest("li");that.current(node),Utils.exec(o.onRadioClick,[checked,check,node,element],this)}),element.on(Metro.events.click,"input[type=checkbox]",function(e){var check=$(this),checked=check.is(":checked"),node=check.closest("li");that._recheck(check),Utils.exec(o.onCheckClick,[checked,check,node,element],this)})},_recheck:function(check){var checked,node,checks,element=this.element;Utils.isJQueryObject(check)||(check=$(check)),checked=check.is(":checked"),node=check.closest("li"),this.current(node),(checks=check.closest("li").find("ul input[type=checkbox]")).attr("data-indeterminate",!1),checks.prop("checked",checked),checks=[],$.each(element.find(":checkbox"),function(){checks.push(this)}),$.each(checks.reverse(),function(){var ch=$(this),children=ch.closest("li").children("ul").find(":checkbox").length,children_checked=ch.closest("li").children("ul").find(":checkbox:checked").length;0<children&&0===children_checked&&(ch.attr("data-indeterminate",!1),ch.prop("checked",!1)),0===children_checked?ch.attr("data-indeterminate",!1):0<children_checked&&children_checked<children?ch.attr("data-indeterminate",!0):children===children_checked&&(ch.attr("data-indeterminate",!1),ch.prop("checked",!0))})},current:function(node){var element=this.element;this.options;if(void 0===node)return element.find("li.current");element.find("li").removeClass("current"),node.addClass("current")},toggleNode:function(node){var func,element=this.element,o=this.options,toBeExpanded=!node.hasClass("expanded");node.toggleClass("expanded"),func="slide"===o.effect?!0===toBeExpanded?"slideUp":"slideDown":!0===toBeExpanded?"fadeOut":"fadeIn",toBeExpanded?Utils.exec(o.onExpandNode,[node,element]):Utils.exec(o.onCollapseNode,[node,element]),node.children("ul")[func](o.duration)},addTo:function(node,data){var target,new_node,element=this.element,o=this.options;return null===node?target=element:0===(target=node.children("ul")).length&&(target=$("<ul>").appendTo(node),this._createToggle().appendTo(node),node.addClass("expanded")),(new_node=this._createNode(data)).appendTo(target),Utils.exec(o.onNodeInsert,[new_node,element],new_node[0]),new_node},insertBefore:function(node,data){var element=this.element,o=this.options,new_node=this._createNode(data);return new_node.insertBefore(node),Utils.exec(o.onNodeInsert,[new_node,element],new_node[0]),new_node},insertAfter:function(node,data){var element=this.element,o=this.options,new_node=this._createNode(data);return new_node.insertAfter(node),Utils.exec(o.onNodeInsert,[new_node,element],new_node[0]),new_node},del:function(node){var element=this.element,o=this.options,parent_list=node.closest("ul"),parent_node=parent_list.closest("li");node.remove(),0!==parent_list.children().length||parent_list.is(element)||(parent_list.remove(),parent_node.removeClass("expanded"),parent_node.children(".node-toggle").remove()),Utils.exec(o.onNodeDelete,[element],element[0])},clean:function(node){var element=this.element,o=this.options;node.children("ul").remove(),node.removeClass("expanded"),node.children(".node-toggle").remove(),Utils.exec(o.onNodeClean,[node,element],node[0])},changeAttribute:function(attributeName){attributeName}};return Metro.plugin("treeview",Treeview),!0===METRO_INIT?Metro.init():Metro});